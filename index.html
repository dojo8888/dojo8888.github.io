<!DOCTYPE html>
<html>
  <head>
	<meta charset="utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta name="description" content="">
	<meta name="author" content="">

	<link rel="icon" href="favicon.ico">
	<link rel="manifest" href="manifest.json">
	<title>TEST</title>    
	<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" rel="stylesheet">
	<script src="//code.jquery.com/jquery.min.js"></script>
  </head>
<body>
<script src="https://www.gstatic.com/firebasejs/3.7.2/firebase.js"></script>
<script type="text/javascript">
if ('serviceWorker' in navigator){

	var config = {
				apiKey: "AIzaSyB9zcIc1TpWX76Y9idkUgzPsDQrfCrW-T0",
				authDomain: "tank-6d5d3.firebaseapp.com",
				databaseURL: "https://tank-6d5d3.firebaseio.com",
				storageBucket: "tank-6d5d3.appspot.com",
				messagingSenderId: "918636476327"
			};

	firebase.initializeApp(config);
	const messaging = firebase.messaging();



    window.addEventListener('load', function() {

	    navigator.serviceWorker.register("/firebase-messaging-sw.js", {scope : '/'}).then(function(registration) {
			console.log('ServiceWorker registration successful with scope: ', registration.scope);
			messaging.useServiceWorker(registration);

			  
			messaging.requestPermission()
			.then(function() {
				console.log('Notification permission granted.');
				// firebase-messagin-sw.js 를 로드하고 service worker (background only) 를 등록한다.
				// 반드시 해당 파일명은 위와 같아야 한다.
				return messaging.getToken()
			})
			.then(function(token){
				console.log('Token - ', token);
			})
			.catch(function(err) {
				console.log('Error ', err);
			});


			
		}).catch(function(err) {
			// registration failed :(
			console.log('ServiceWorker registration failed: ', err);
		});
		



	});
}


  

</script>
</body>
</html>